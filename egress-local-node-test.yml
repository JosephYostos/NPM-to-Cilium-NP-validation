apiVersion: v1
kind: Namespace
metadata:
  name: test-egress

---
apiVersion: v1
kind: Pod
metadata:
  name: test-pod
  namespace: test-egress
  labels:
    app: test-pod
spec:
  containers:
  - name: curl
    image: curlimages/curl:latest
    command: ["sleep", "3600"]

---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-egress-to-external
  namespace: test-egress
spec:
  podSelector:
    matchLabels:
      app: test-pod
  policyTypes:
  - Egress
  egress:
  - to:
    - ipBlock:
        cidr: 8.8.8.8/32

